{% load static %}
{% block extrahead %}
    <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
{% endblock %}

<div style="margin: 1rem;">

    <div>
        <div id="pie" style="width: 40rem; height: 19rem;"></div>
        <script>
            var chart = echarts.init(document.getElementById('pie'), 'white', {renderer: 'canvas'});

            $(
                function () {
                    fetchData(chart);
                }
            );

            function fetchData() {
                $.ajax({
                    type: "GET",
                    {% if local_flag %}
                    url: "http://127.0.0.1:8000/pensions/pension_pie_chart",
                    {% else %}
                    url: "http://141.164.44.54/pensions/pension_pie_chart/",
                    {% endif %}
                    dataType: 'json',
                    success: function (result) {
                        chart.setOption(result.data);
                    }
                });
            }
        </script>
    </div>
</div>